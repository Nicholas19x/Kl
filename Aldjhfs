local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

local Window = OrionLib:MakeWindow({Name = "Title of the library", HidePremium = false, SaveConfig = true, ConfigFolder = "OrionTest"})

local AutofarmSettingTab = Window:MakeTab({
	Name = "Setting",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local AutofarmTab = Window:MakeTab({
	Name = "Auto farm",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local melee = game:GetService("Players").LocalPlayer.PlayerStats.FightingStyle
local sword = game:GetService("Players").LocalPlayer.PlayerStats.SwordName

AutofarmSettingTab:AddDropdown({
	Name = "Weapon",
	Default = "melee",
	Options = {"melee", "sword"},
	Callback = function(Value)
		if Value == "melee" and melee then
			print(melee.Value)
		elseif Value == "sword" and sword then
			print(sword.Value)
		else
			warn("Invalid selection or stat not found")
		end
	end    
})

function checklevel()
    local lv = game:GetService("Players").LocalPlayer.PlayerStats.lvl.Value
    print(lv)
    if lv == 1 or lv <= 2000 then
        MonName = "Soldier [Lv. 1]"
        QuestName = "Kill 4 Soldiers"
        print("Quest Set To:", QuestName)
    end
end

-- ฟังก์ชันที่ใช้ในการตั้งค่าตำแหน่ง CFrame ของตัวละคร
function totarget(targetCFrame)
    local character = game:GetService("Players").LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = targetCFrame
    end
end

spawn(function()
    while task.wait(.1) do
        pcall(function()
            if _G.Auto_Farm then
                checklevel()
                if game:GetService("Players").LocalPlayer.PlayerGui.MainGui.QuestBoard.Visible == false then
                    if QuestName and QuestName ~= "" then
                        local args = {
                            [1] = "take",
                            [2] = QuestName
                        }
                        print("args[1]:", args[1])
                        print("args[2]:", args[2])
                        game:GetService("ReplicatedStorage").Chest.Remotes.Functions.Quest:InvokeServer(unpack(args))
                    else
                        warn("QuestName variable is empty or nil")
                    end
                end
            end
        end)
    end
end)

spawn(function()
    while task.wait(0.1) do
        if _G.Auto_Farm then
            if game:GetService("Players").LocalPlayer.PlayerGui.MainGui.QuestBoard.Visible == true then
                for _, v in pairs(game:GetService("Workspace").Monster.Mon:GetChildren()) do
                    if v.Name == MonName then
                        -- วาปไปหามอนสเตอร์
                        local targetPosition = v.HumanoidRootPart.CFrame * CFrame.new(0, 1, 15)
                        totarget(targetPosition)
                        v.HumanoidRootPart.Size = Vector3.new(60, 2.5, 60)
                        v.HumanoidRootPart.CFrame = CFrameMon
                    end
                end
            end
        end
    end
end)

AutofarmTab:AddToggle({
	Name = "Auto farm",
	Default = false,
	Callback = function(Value)
		_G.Auto_Farm = Value
		if _G.Auto_Farm then
			print("Auto farm started")
		else
			print("Auto farm stopped")
		end
	end    
})
