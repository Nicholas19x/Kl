local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local character = player.Character
local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")

local function moveTo(position)
    if humanoidRootPart then
        local tweenInfo = TweenInfo.new(
            1,  -- Duration of the tween in seconds
            Enum.EasingStyle.Linear,  -- Easing style
            Enum.EasingDirection.InOut,  -- Easing direction
            0,  -- Number of times to repeat
            false,  -- Reverse the tween or not
            0  -- Delay time
        )

        local goal = { CFrame = position }
        local tween = TweenService:Create(humanoidRootPart, tweenInfo, goal)
        tween:Play()
    end
end

spawn(function()
    while task.wait(0.1) do
        if _G.Auto_Farm then
            if game:GetService("Players").LocalPlayer.PlayerGui.MainGui.QuestBoard.Visible == true then
                if not currentTarget or currentTarget:FindFirstChild("Humanoid") and currentTarget.Humanoid.Health <= 0 then
                    currentTarget = findNewTarget()
                end
                if currentTarget then
                    -- Move to the position 2.5 times the height above the head
                    local heightAboveHead = currentTarget.HumanoidRootPart.Size.Y * 2.5
                    local targetPosition = currentTarget.HumanoidRootPart.CFrame * CFrame.new(0, heightAboveHead, 0)
                    moveTo(targetPosition)
                end
            end
        end
    end
end)
