local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

local Window = OrionLib:MakeWindow({Name = "Title of the library", HidePremium = false, SaveConfig = true, ConfigFolder = "OrionTest"})

local AutofarmSettingTab = Window:MakeTab({
    Name = "Setting",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local AutofarmTab = Window:MakeTab({
    Name = "Auto farm",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local melee = game:GetService("Players").LocalPlayer.PlayerStats.FightingStyle
local sword = game:GetService("Players").LocalPlayer.PlayerStats.SwordName

AutofarmSettingTab:AddDropdown({
    Name = "Weapon",
    Default = "melee",
    Options = {"melee", "sword"},
    Callback = function(Value)
        if Value == "melee" and melee then
        elseif Value == "sword" and sword then
        end
    end    
})

function checklevel()
    local lv = game:GetService("Players").LocalPlayer.PlayerStats.lvl.Value
    if lv == 1 or lv <= 2000 then
        Mon = "Soldier [Lv. 1]"
        QuestName = "Kill 4 Soldiers"
    end
end

local function totarget(position)
    if position then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = position
    end
end

spawn(function()
    while task.wait(.1) do
        pcall(function()
            if _G.Auto_Farm then
                checklevel()
                if game:GetService("Players").LocalPlayer.PlayerGui.MainGui.QuestBoard.Visible == false then
                    if QuestName and QuestName ~= "" then
                        local args = {
                            [1] = "take",
                            [2] = QuestName
                        }
                        game:GetService("ReplicatedStorage").Chest.Remotes.Functions.Quest:InvokeServer(unpack(args))
                    end
                end
            end
        end)
    end
end)

spawn(function()
    while task.wait(0.1) do
        if _G.Auto_Farm then
            if game:GetService("Players").LocalPlayer.PlayerGui.MainGui.QuestBoard.Visible == true then
                for _, v in pairs(game:GetService("Workspace").Monster.Mon:GetChildren()) do
                    if v.Name == Mon then
                        local humanoid = v:FindFirstChildOfClass("Humanoid")
                        if humanoid and humanoid.Health > 0 then
                            -- Destroy the HumanoidRootPart if health is greater than 0
                            local rootPart = v:FindFirstChild("HumanoidRootPart")
                            if rootPart then
                                rootPart:Destroy()
                            end
                        end

                        local heightAboveHead = v.HumanoidRootPart.Size.Y * 2.5
                        local targetPosition = v.HumanoidRootPart.CFrame * CFrame.new(0, heightAboveHead, 0)
                        
                        if targetPosition then
                            totarget(targetPosition)
                            v.HumanoidRootPart.Size = Vector3.new(60, 2.5, 60)
                            if CFrameMon then
                                v.HumanoidRootPart.CFrame = CFrameMon
                            end
                        end
                    end
                end
            end
        end
    end
end)

AutofarmTab:AddToggle({
    Name = "Auto farm",
    Default = false,
    Callback = function(Value)
        _G.Auto_Farm = Value
    end    
})
